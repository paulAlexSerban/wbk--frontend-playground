/*! For license information please see joke-teller.js.LICENSE.txt */
(()=>{"use strict";var e=document.getElementById("audio");const t={speech:function(e){this._validate(e),this._request(e)},_validate:function(e){if(!e)throw"The settings are undefined";if(!e.key)throw"The API key is undefined";if(!e.src)throw"The text is undefined";if(!e.hl)throw"The language is undefined";if(e.c&&"auto"!=e.c.toLowerCase()){var t=!1;switch(e.c.toLowerCase()){case"mp3":t=(new Audio).canPlayType("audio/mpeg").replace("no","");break;case"wav":t=(new Audio).canPlayType("audio/wav").replace("no","");break;case"aac":t=(new Audio).canPlayType("audio/aac").replace("no","");break;case"ogg":t=(new Audio).canPlayType("audio/ogg").replace("no","");break;case"caf":t=(new Audio).canPlayType("audio/x-caf").replace("no","")}if(!t)throw"The browser does not support the audio codec ".concat(e.c)}},_request:function(t){var n=this._buildRequest(t),r=this._getXHR();r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){if(0==r.responseText.indexOf("ERROR"))throw r.responseText;var t=r.responseText;e.src=t,e.onloadedmetadata=function(){e.play()}}},r.open("POST","https://api.voicerss.org/",!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(n)},_buildRequest:function(e){var t=e.c&&"auto"!=e.c.toLowerCase()?e.c:this._detectCodec();return"key=".concat(e.key||"","&src=").concat(e.src||"","&hl=").concat(e.hl||"","&r=").concat(e.r||"","&c=").concat(t||"","&f=").concat(e.f||"","&ssml=").concat(e.ssml||"","&b64=true")},_detectCodec:function(){var e=new Audio;return e.canPlayType("audio/mpeg").replace("no","")?"mp3":e.canPlayType("audio/wav").replace("no","")?"wav":e.canPlayType("audio/aac").replace("no","")?"aac":e.canPlayType("audio/ogg").replace("no","")?"ogg":e.canPlayType("audio/x-caf").replace("no","")?"caf":""},_getXHR:function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw"The browser does not support HTTP request"}};function n(){var e,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function i(n,o,a,c){var i=o&&o.prototype instanceof s?o:s,f=Object.create(i.prototype);return r(f,"_invoke",function(n,r,o){var a,c,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,c=0,i=e,p.n=n,u}};function d(n,r){for(c=n,i=r,t=0;!l&&s&&!o&&t<f.length;t++){var o,a=f[t],d=p.p,y=a[2];n>3?(o=y===r)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<y&&(o=n<3||a[0]>r||r>y)&&(a[4]=n,a[5]=r,p.n=y,c=0))}if(o||n>1)return u;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,y),c=f,i=y;(t=c<2?e:i)||!l;){a||(c?c<3?(c>1&&(p.n=-1),d(c,i)):p.n=i:p.v=i);try{if(s=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(l=p.n<0)?i:n.call(r,p))!==u)break}catch(t){a=e,c=1,i=t}finally{s=1}}return{value:t,done:l}}}(n,a,c),!0),f}var u={};function s(){}function f(){}function l(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(r(t={},a,(function(){return this})),t),d=l.prototype=s.prototype=Object.create(p);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,r(e,c,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=l,r(d,"constructor",l),r(l,"constructor",f),f.displayName="GeneratorFunction",r(l,c,"GeneratorFunction"),r(d),r(d,c,"Generator"),r(d,a,(function(){return this})),r(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:y}})()}function r(e,t,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,t,n,o){if(t)a?a(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var c=function(t,n){r(e,t,(function(e){return this._invoke(t,n,e)}))};c("next",0),c("throw",1),c("return",2)}},r(e,t,n,o)}function o(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}var a=document.getElementById("button"),c=document.getElementById("audio");function i(){a.disabled=!a.disabled}function u(e){var n=e.trim().replace(/ /g,"%20");t.speech({key:"e985f868e96c46d9b0789c3855350152",src:n,hl:"en-us",r:0,c:"mp3",f:"44khz_16bit_stereo",ssml:!1})}function s(){var e;return e=n().m((function e(){var t,r;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=1,e.n=2,fetch("https://sv443.net/jokeapi/v2/joke/Programming?blacklistFlags=nsfw,racist,sexist");case 2:return t=e.v,e.n=3,t.json();case 3:u((r=e.v).setup?"".concat(r.setup," ... ").concat(r.delivery):r.joke),i(),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}}),e,null,[[1,4]])})),s=function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function i(e){o(c,r,a,i,u,"next",e)}function u(e){o(c,r,a,i,u,"throw",e)}i(void 0)}))},s.apply(this,arguments)}a.addEventListener("click",(function(){return s.apply(this,arguments)})),c.addEventListener("ended",i)})();