(()=>{"use strict";var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.prototype.slice.call(t.querySelectorAll(e))},t=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var s=function(){return n=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.setupDomReferences(),this.setupEventListeners(),this.initComparisons()},o=[{key:"setupDomReferences",value:function(){this.elements={container:t(".img-comparison__container",this.element),imgOverlay:e(".img-comparison__overlay",this.element),imageForComparisonInput:t(".js-image-path-for-compare",this.element),imageToCompareInput:t(".js-image-path-to-compare",this.element),imageWidthInput:t(".js-image-width",this.element),imageForComparison:t(".js-image-for-compare",this.element),imageToCompare:t(".js-image-to-compare",this.element)}}},{key:"fetchImage",value:function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src=e}))}},{key:"setupEventListeners",value:function(){var e=this;this.elements.imageForComparisonInput.addEventListener("change",(function(t){return e.updateImage("imageForComparison",t.target.value)})),this.elements.imageToCompareInput.addEventListener("change",(function(t){return e.updateImage("imageToCompare",t.target.value)})),this.elements.imageWidthInput.addEventListener("change",(function(t){var n=parseInt(t.target.value);e.elements.container.style.setProperty("--img-comp-slider-width","".concat(n,"px")),e.resetComparisons(),e.initComparisons()}))}},{key:"updateImage",value:function(e,t){var n=this;this.fetchImage(t).then((function(){n.elements[e].setAttribute("src",t)}))}},{key:"compareImages",value:function(e){var t=0,n=e.offsetWidth,r=e.offsetHeight;e.style.width=n/2+"px";var o=document.createElement("DIV");function i(e){e.preventDefault(),t=1,window.addEventListener("mousemove",s),window.addEventListener("touchmove",s)}o.setAttribute("class","img-comparison__slider"),e.parentElement.insertBefore(o,e),o.style.top=r/2-o.offsetHeight/2+"px",o.style.left=n/2-o.offsetWidth/2+"px",o.addEventListener("mousedown",i),window.addEventListener("mouseup",a),o.addEventListener("touchstart",i),window.addEventListener("touchend",a);var a=function(){t=0},s=function(e){var r;if(0===t)return!1;(r=u(e))<0&&(r=0),r>n&&(r=n),c(r)},u=function(t){var n,r=0;return t=t.changedTouches?t.changedTouches[0]:t,n=e.getBoundingClientRect(),r=t.pageX-n.left,r-=window.pageXOffset},c=function(t){e.style.width=t+"px",o.style.left=e.offsetWidth-o.offsetWidth/2+"px"}}},{key:"initComparisons",value:function(){var e,t=r(this.elements.imgOverlay);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.compareImages(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"resetComparisons",value:function(){var e,t=r(this.elements.imgOverlay);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.style.width="";var o=n.parentNode.querySelector(".img-comparison__slider");o&&o.remove()}}catch(e){t.e(e)}finally{t.f()}}}],o&&i(n.prototype,o),a&&i(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}();document.querySelectorAll('[data-js-cmp="ImageComparisonSlider"]').forEach((function(e){return new s(e)}))})();