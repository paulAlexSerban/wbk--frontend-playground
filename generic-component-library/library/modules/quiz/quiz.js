(()=>{"use strict";var e=function(){function e(e,t,n,s){this.id=e,this.questionText=t,this.options=n,this.correctAnswer=s}var t={setQuestionCollection:function(e){localStorage.setItem("questionCollection",JSON.stringify(e))},getQuestionCollection:function(){return JSON.parse(localStorage.getItem("questionCollection"))},removeQuestionCollection:function(){localStorage.removeItem("questionCollection")}};null===t.getQuestionCollection()&&t.setQuestionCollection([]);var n={questionIndex:0};function s(e,t,n,s){this.id=e,this.firstName=t,this.lastName=n,this.score=s}var o={fullName:[],score:0},i={setPersonData:function(e){localStorage.setItem("personData",JSON.stringify(e))},getPersonData:function(){return JSON.parse(localStorage.getItem("personData"))},removePersonData:function(){localStorage.removeItem("personData")}};null===i.getPersonData()&&i.setPersonData([]);return{getQuizProgress:n,getQuestionLocalStorage:t,addQuestionOnLocalStorage:function(n,s){var o,i,a,l,r,u=[];null===t.getQuestionCollection()&&t.setQuestionCollection([]);for(var c=0;c<s.length;c++)""!==s[c].value&&u.push(s[c].value),s[c].previousElementSibling.checked&&""!==s[c].value&&(r=s[c].value,l=!0);if(o=t.getQuestionCollection().length>0?t.getQuestionCollection()[t.getQuestionCollection().length-1].id+1:0,""!==n.value){if(u.length>1){if(l){i=new e(o,n.value,u,r),(a=t.getQuestionCollection()).push(i),t.setQuestionCollection(a),n.value="";for(var m=0;m<s.length;m++)s[m].value="",s[m].previousElementSibling.checked=!1;return!0}return alert("You missed to check correct answer, or you checked answer without value"),!1}return alert("You must insert at least two options"),!1}return alert("Please, Insert Question"),!1},checkAnswer:function(e){return t.getQuestionCollection()[n.questionIndex].correctAnswer===e.textContent&&(o.score++,!0)},isFinished:function(){return n.questionIndex+1===t.getQuestionCollection().length},addPerson:function(){var e=new s(i.getPersonData().length>0?i.getPersonData()[i.getPersonData().length-1].id+1:0,o.fullName[0],o.fullName[1],o.score),t=i.getPersonData();t.push(e),i.setPersonData(t)},getCurrPersonData:o,getAdminFullName:["John","Smith"],getPersonLocalStorage:i}},t=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)},n=function(e){var n={state:{},elements:{},data:{}};return function(){n.elements.adminPanelSection=t(".admin-panel-container",e),n.elements.questInsertBtn=t("#question-insert-btn",e),n.elements.newQuestionText=t("#new-question-text",e),n.elements.adminOptions=document.querySelectorAll(".admin-option"),n.elements.adminOptionsContainer=t(".admin-options-container",e),n.elements.insertedQuestsWrapper=t(".inserted-questions-wrapper",e),n.elements.questUpdateBtn=t("#question-update-btn",e),n.elements.questDeleteBtn=t("#question-delete-btn",e),n.elements.questsClearBtn=t("#questions-clear-btn",e),n.elements.resultsListWrapper=t(".results-list-wrapper",e),n.elements.clearResultsBtn=t("#results-clear-btn"),n.elements.quizSection=t(".quiz-container",e),n.elements.askedQuestText=t("#asked-question-text",e),n.elements.quizoptionsWrapper=t(".quiz-options-wrapper",e),n.elements.progressBar=t("progress",e),n.elements.progressPar=t("#progress",e),n.elements.instAnsContainer=t(".instant-answer-container",e),n.elements.instAnsText=t("#instant-answer-text",e),n.elements.instAnsDiv=t("#instant-answer-wrapper",e),n.elements.emotionIcon=t("#emotion",e),n.elements.nextQuestbtn=t("#next-question-btn",e),n.elements.landPageSection=t(".landing-page-container",e),n.elements.startQuizBtn=t("#start-quiz-btn",e),n.elements.firstNameInput=t("#firstname",e),n.elements.lastNameInput=t("#lastname",e),n.elements.finalResultSection=t(".final-result-container",e),n.elements.finalScoreText=t("#final-score-text",e)}(),{getDomItems:n.elements,addInputsDynamically:function(){var e=function(){var t=document.querySelectorAll(".admin-option").length,s='\n      <div class="admin-option-wrapper">\n        <input type="radio" class="admin-option-'.concat(t,'" name="answer" value="').concat(t,'">\n        <input type="text" class="admin-option admin-option-').concat(t,'" value="">\n      </div>');n.elements.adminOptionsContainer.insertAdjacentHTML("beforeend",s),n.elements.adminOptionsContainer.lastElementChild.previousElementSibling.lastElementChild.removeEventListener("focus",e),n.elements.adminOptionsContainer.lastElementChild.lastElementChild.addEventListener("focus",e)};n.elements.adminOptionsContainer.lastElementChild.lastElementChild.addEventListener("focus",e)},createQuestionList:function(e){var t,s=[];n.elements.insertedQuestsWrapper.innerHTML="";for(var o=0;o<e.getQuestionCollection().length;o++)s.push(o+1),t="\n        <p>\n        <span>\n        ".concat(s[o],". ").concat(e.getQuestionCollection()[o].questionText,'\n        </span>\n        <button id="question-').concat(e.getQuestionCollection()[o].id,'">Edit</button>\n        </p>'),n.elements.insertedQuestsWrapper.insertAdjacentHTML("afterbegin",t)},editQuestList:function(e,t,s,o){var i,a,l,r,u;if("question-".indexOf(e.target.id)){i=parseInt(e.target.id.split("-")[1]),a=t.getQuestionCollection();for(var c=0;c<a.length;c++)a[c].id===i&&(l=a[c],r=c);n.elements.newQuestionText.value=l.questionText,n.elements.adminOptionsContainer.innerHTML="",u="";for(var m=0;m<l.options.length;m++)u+='<div class="admin-option-wrapper">\n          <input type="radio" class="admin-option-4'.concat(m,'" name="answer" value="').concat(m,'">\n          <input type="text" class="admin-option admin-option-').concat(m,'" value="').concat(l.options[m],'">\n        </div>');n.elements.adminOptionsContainer.innerHTML=u,n.elements.questDeleteBtn.style.visibility="visible",n.elements.questUpdateBtn.style.visibility="visible",n.elements.questInsertBtn.style.visibility="hidden",n.elements.questsClearBtn.style.pointerEvents="none",s();var d=function(){var e;n.elements.newQuestionText.value="",e=document.querySelectorAll(".admin-option");for(var s=0;s<e.length;s++)e[s].value="",e[s].previousElementSibling.checked=!1;n.elements.questDeleteBtn.style.visibility="hidden",n.elements.questUpdateBtn.style.visibility="hidden",n.elements.questInsertBtn.style.visibility="visible",n.elements.questsClearBtn.style.pointerEvents="",o(t)};n.elements.questUpdateBtn.onclick=function(){var e,s;e=[],s=document.querySelectorAll(".admin-option"),l.questionText=n.elements.newQuestionText.value,l.correctAnswer="";for(var o=0;o<s.length;o++)""!==s[o].value&&(e.push(s[o].value),s[o].previousElementSibling.checked&&(l.correctAnswer=s[o].value));l.options=e,""!==l.questionText?l.options.length>1?""!==l.correctAnswer?(a.splice(r,1,l),t.setQuestionCollection(a),d()):alert("You missed to check correct answer, or you checked answer without value"):alert("You must insert at least two options"):alert("Please, insert question")};n.elements.questDeleteBtn.onclick=function(){a.splice(r,1),t.setQuestionCollection(a),d()}}},clearQuestList:function(e){null!==e.getQuestionCollection()&&(e.getQuestionCollection().length>0&&confirm("Warning! You will lose entire question list")&&(e.removeQuestionCollection(),n.elements.insertedQuestsWrapper.innerHTML=""))},displayQuestion:function(e,t){var s,o;if(o=["A","B","C","D","E","F"],e.getQuestionCollection().length>0){n.elements.askedQuestText.textContent=e.getQuestionCollection()[t.questionIndex].questionText,n.elements.quizoptionsWrapper.innerHTML="";for(var i=0;i<e.getQuestionCollection()[t.questionIndex].options.length;i++)s='<div class="choice-'.concat(i,'">\n                  <span class="choice-').concat(i,'">').concat(o[i],'</span>\n                  <p  class="choice-').concat(i,'">').concat(e.getQuestionCollection()[t.questionIndex].options[i],"</p>\n                </div>"),n.elements.quizoptionsWrapper.insertAdjacentHTML("beforeend",s)}},displayProgress:function(e,t){n.elements.progressBar.max=e.getQuestionCollection().length,n.elements.progressBar.value=t.questionIndex+1,n.elements.progressPar.textContent=t.questionIndex+1+"/"+e.getQuestionCollection().length},newDesign:function(e,t){var s,o;o=0,e&&(o=1),s={instAnswerText:["This is a wrong answer","This is a correct answer"],instAnswerClass:["red","green"],emotionType:["/images/sad-original.webp","/images/happy-original.webp"],optionSpanBg:["rgba(200, 0, 0, .7)","rgba(0, 250, 0, .2)"]},n.elements.quizoptionsWrapper.style.cssText="opacity: 0.6; pointer-events: none;",n.elements.instAnsContainer.style.opacity="1",n.elements.instAnsText.textContent=s.instAnswerText[o],n.elements.instAnsDiv.className=s.instAnswerClass[o],n.elements.emotionIcon.setAttribute("src",s.emotionType[o]),t.previousElementSibling.style.backgroundColor=s.optionSpanBg[o]},resetDesign:function(){n.elements.quizoptionsWrapper.style.cssText="",n.elements.instAnsContainer.style.opacity="0"},getFullName:function(e,t,s){""!==n.elements.firstNameInput.value&&""!==n.elements.lastNameInput.value?n.elements.firstNameInput.value!==s[0]||n.elements.lastNameInput.value!==s[1]?t.getQuestionCollection().length>0?(e.fullName.push(n.elements.firstNameInput.value),e.fullName.push(n.elements.lastNameInput.value),n.elements.landPageSection.style.display="none",n.elements.quizSection.style.display="block"):alert("Quiz is not ready, please contact to administrator"):(n.elements.landPageSection.style.display="none",n.elements.adminPanelSection.style.display="block"):alert("Please, enter your first name and last name")},finalResult:function(e){n.elements.finalScoreText.textContent="".concat(e.fullName[0]," ").concat(e.fullName[1],", your final score is ").concat(e.score),n.elements.quizSection.style.display="none",n.elements.finalResultSection.style.display="block"},addResultOnPanel:function(e){var t;n.elements.resultsListWrapper.innerHTML="";for(var s=0;s<e.getPersonData().length;s++)t='\n        <p class="person person-'.concat(s,'">\n          <span class="person-').concat(s,'">').concat(e.getPersonData()[s].firstName," ").concat(e.getPersonData()[s].lastName," - ").concat(e.getPersonData()[s].score,' Points</span>\n          <button id="delete-result-btn_').concat(e.getPersonData()[s].id,'" class="delete-result-btn">Delete</button>\n        </p>\n        '),n.elements.resultsListWrapper.insertAdjacentHTML("afterbegin",t)},deleteResult:function(e,t){var n,s;if(s=t.getPersonData(),"delete-result-btn_".indexOf(e.target.id)){n=parseInt(e.target.id.split("_")[1]);for(var o=0;o<s.length;o++)s[o].id===n&&(s.splice(o,1),t.setPersonData(s))}},clearResultList:function(e){null!==e.getPersonData()&&e.getPersonData().length>0&&confirm("Warning! You will lose entire result list")&&(e.removePersonData(),n.elements.resultsListWrapper.innerHTML="")}}},s=function(e,t){var n=e(),s=t(),o=s.getDomItems;s.addInputsDynamically(),s.createQuestionList(n.getQuestionLocalStorage),s.displayQuestion(n.getQuestionLocalStorage,n.getQuizProgress),s.displayProgress(n.getQuestionLocalStorage,n.getQuizProgress),s.addResultOnPanel(n.getPersonLocalStorage);(function(){o.questInsertBtn.addEventListener("click",(function(){var e=document.querySelectorAll(".admin-option");n.addQuestionOnLocalStorage(o.newQuestionText,e)&&s.createQuestionList(n.getQuestionLocalStorage)})),o.startQuizBtn.addEventListener("click",(function(){s.getFullName(n.getCurrPersonData,n.getQuestionLocalStorage,n.getAdminFullName)})),o.lastNameInput.addEventListener("focus",(function(){o.lastNameInput.addEventListener("keypress",(function(e){13===e.keyCode&&s.getFullName(n.getCurrPersonData,n.getQuestionLocalStorage,n.getAdminFullName)}))})),o.insertedQuestsWrapper.addEventListener("click",(function(e){s.editQuestList(e,n.getQuestionLocalStorage,s.addInputsDynamically,s.createQuestionList)})),o.questsClearBtn.addEventListener("click",(function(){s.clearQuestList(n.getQuestionLocalStorage)})),o.quizoptionsWrapper.addEventListener("click",(function(e){for(var t=o.quizoptionsWrapper.querySelectorAll("div"),i=function(){if(e.target.className==="choice-"+a){var t=document.querySelector(".quiz-options-wrapper div p."+e.target.className),i=n.checkAnswer(t);s.newDesign(i,t),n.isFinished()&&(o.nextQuestbtn.textContent="Finish");o.nextQuestbtn.onclick=function(){n.getQuestionLocalStorage,n.getQuizProgress,n.isFinished()?(n.addPerson(),s.finalResult(n.getCurrPersonData)):(s.resetDesign(),n.getQuizProgress.questionIndex++,s.displayQuestion(n.getQuestionLocalStorage,n.getQuizProgress),s.displayProgress(n.getQuestionLocalStorage,n.getQuizProgress))}}},a=0;a<t.length;a++)i()})),o.startQuizBtn.addEventListener("click",(function(){s.getFullName(n.getCurrPersonData,n.getQuestionLocalStorage,n.getAdminFullName)})),o.lastNameInput.addEventListener("focus",(function(){o.lastNameInput.addEventListener("keypress",(function(e){13===e.keyCode&&s.getFullName(n.getCurrPersonData,n.getQuestionLocalStorage,n.getAdminFullName)}))})),o.resultsListWrapper.addEventListener("click",(function(e){s.deleteResult(e,n.getPersonLocalStorage),s.addResultOnPanel(n.getPersonLocalStorage)})),o.clearResultsBtn.addEventListener("click",(function(){s.clearResultList(n.getPersonLocalStorage)}))})()},o="widget",i="Quiz";document.querySelectorAll("[data-js-".concat(o,"=").concat(i,"]")).forEach((function(t){s(e,n)}))})();