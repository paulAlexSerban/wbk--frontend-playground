(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function i(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var o=function(e,o){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,o||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==t(o)?o:o+""}var s=function(){return i((function t(){e(this,t),this.todos=JSON.parse(localStorage.getItem("todos"))||[]}),[{key:"bindTodoListChanged",value:function(t){this.onTodoListChanged=t}},{key:"_commit",value:function(t){this.onTodoListChanged(t),localStorage.setItem("todos",JSON.stringify(t))}},{key:"addTodo",value:function(t){this.todo={id:this.todos.length>0?this.todos[this.todos.length-1].id+1:1,text:t,complete:!1},this.todos.push(this.todo),this._commit(this.todos)}},{key:"editTodo",value:function(t,e){this.todos=this.todos.map((function(o){return o.id===t?{id:o.id,text:e,complete:o.complete}:o})),this._commit(this.todos)}},{key:"deleteTodo",value:function(t){this.todos=this.todos.filter((function(e){return e.id!==t})),this._commit(this.todos)}},{key:"toggleTodo",value:function(t){this.todos=this.todos.map((function(e){return e.id===t?{id:e.id,text:e.text,complete:!e.complete}:e})),this._commit(this.todos)}}])}(),d=function(){return i((function t(){e(this,t),this.init(),this._temporaryTodoText="",this._initLocalListeners()}),[{key:"setupElements",value:function(){this.app=this.getElement("#root"),this.form=this.createElement("form"),this.input=this.createElement("input"),this.input.type="text",this.input.placeholder="Add todo",this.input.name="todo",this.submitButton=this.createElement("button"),this.submitButton.textContent="Submit",this.form.append(this.input,this.submitButton),this.title=this.createElement("h1"),this.title.textContent="Todos",this.todoList=this.createElement("ul","todo-list"),this.app.append(this.title,this.form,this.todoList)}},{key:"_todoText",get:function(){return this.input.value}},{key:"_resetInput",value:function(){this.input.value=""}},{key:"createElement",value:function(t,e){return this.element=document.createElement(t),e&&this.element.classList.add(e),this.element}},{key:"getElement",value:function(t){return this.element=document.querySelector(t),this.element}},{key:"displayTodos",value:function(t){for(var e=this;this.todoList.firstChild;)this.todoList.removeChild(this.todoList.firstChild);0===t.length?(this.p=this.createElement("p"),this.p.textContent="Nothing to do! Add a task?",this.todoList.append(this.p)):t.forEach((function(t){e.li=e.createElement("li"),e.li.id=t.id,e.checkbox=e.createElement("input"),e.checkbox.type="checkbox",e.checkbox.checked=t.complete,e.span=e.createElement("span"),e.span.contentEditable=!0,e.span.classList.add("editable"),t.complete?(e.strike=e.createElement("s"),e.strike.textContent=t.text,e.span.append(e.strike)):e.span.textContent=t.text,e.deleteButton=e.createElement("button","delete"),e.deleteButton.textContent="Delete",e.li.append(e.checkbox,e.span,e.deleteButton),e.todoList.append(e.li)}))}},{key:"_initLocalListeners",value:function(){var t=this;this.todoList.addEventListener("input",(function(e){"editable"===e.target.className&&(t._temporaryTodoText=e.target.innerText)}))}},{key:"bindAddTodo",value:function(t){var e=this;this.form.addEventListener("submit",(function(o){o.preventDefault(),e._todoText&&(t(e._todoText),e._resetInput())}))}},{key:"bindDeleteTodo",value:function(t){var e=this;this.todoList.addEventListener("click",(function(o){"delete"===o.target.className&&(e.id=parseInt(o.target.parentElement.id),t(e.id))}))}},{key:"bindEditTodo",value:function(t){var e=this;this.todoList.addEventListener("focusout",(function(o){e._temporaryTodoText&&(e.id=parseInt(o.target.parentElement.id),t(e.id,e._temporaryTodoText),e._temporaryTodoText="")}))}},{key:"bindToggleTodo",value:function(t){var e=this;this.todoList.addEventListener("change",(function(o){"checkbox"===o.target.type&&(e.id=parseInt(o.target.parentElement.id),t(e.id))}))}},{key:"init",value:function(){this.setupElements()}}])}(),a=function(){return i((function t(){e(this,t),this.init()}),[{key:"onTodoListChanged",value:function(t){this.view.displayTodos(t)}},{key:"handleAddTodo",value:function(t){this.model.addTodo(t)}},{key:"handleEditTodo",value:function(t,e){this.model.editTodo(t,e)}},{key:"handleDeleteTodo",value:function(t){this.model.deleteTodo(t)}},{key:"handleToggleTodo",value:function(t){this.model.toggleTodo(t)}},{key:"explicitBind",value:function(){this.model.bindTodoListChanged(this.onTodoListChanged),this.view.bindAddTodo(this.handleAddTodo),this.view.bindEditTodo(this.handleEditTodo),this.view.bindDeleteTodo(this.handleDeleteTodo),this.view.bindToggleTodo(this.handleToggleTodo)}},{key:"init",value:function(){this.model=new s,this.view=new d,this.explicitBind(),this.onTodoListChanged(this.model.todos)}}])}();new a})();