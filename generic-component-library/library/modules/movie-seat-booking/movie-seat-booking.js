(()=>{"use strict";var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.prototype.slice.call(t.querySelectorAll(e))},t=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)},n=function(e,t){var n=e.split(".").join("");return t.classList?t.classList.contains(n):new RegExp("(^| )".concat(n,"( |$)"),"gi").test(t.className)},o=function(e,t){return t.classList?t.classList.add(e):"".concat(t.className," ").concat(e)},a=function(e,t){return n(e,t)?function(e,t){return t.classList?t.classList.remove(e):(t.className=t.className.replace(new RegExp("(^|\\b)".concat(e.split(" ").join("|"),"(\\b|$)"),"gi")," "),t)}(e,t):o(e,t)};function c(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var r="widget",s="MovieSeatBooking",l={container:".movie-seat-booking__container",seats:".movie-seat-booking__row .movie-seat-booking__seat:not(.movie-seat-booking__seat--occupied)",selectedSeats:".movie-seat-booking__row .movie-seat-booking__seat.movie-seat-booking__seat--selected",count:"#count",total:"#total",movieSelect:"#movie"},u={bookingSeat:"movie-seat-booking__seat",occupied:"movie-seat-booking__seat--occupied",selected:"movie-seat-booking__seat--selected"},d={selectedSeats:"selectedSeats",selectedMovieIndex:"selectedMovieIndex",selectedMoviePrice:"selectedMoviePrice"};document.querySelectorAll("[data-js-".concat(r,"=").concat(s,"]")).forEach((function(i){return function(i){var r={state:{},elements:{},data:{}},s=i,m=function(){r.elements.container.addEventListener("click",(function(e){n(u.bookingSeat,e.target)&&!n(u.occupied,e.target)&&(a(u.selected,e.target),v())})),r.elements.movieSelect.addEventListener("change",(function(e){r.data.ticketPrice=+e.target.value,g(e.target.selectedIndex,e.target.value),v()}))},v=function(){var t=e(l.selectedSeats,s),n=c(t).map((function(e){return c(r.elements.seats).indexOf(e)}));localStorage.setItem(d.selectedSeats,JSON.stringify(n));var o=t.length;r.elements.count.innerText=o,r.elements.total.innerText=o*r.data.ticketPrice},g=function(e,t){localStorage.setItem(d.selectedMovieIndex,e),localStorage.setItem(d.selectedMoviePrice,t)},f=function(){var e=JSON.parse(localStorage.getItem(d.selectedSeats));null!==e&&e.length>0&&r.elements.seats.forEach((function(t,n){e.indexOf(n)>-1&&o(u.selected,t)}));var t=localStorage.getItem(d.selectedMovieIndex);null!==t&&(r.elements.movieSelect.selectedIndex=t)};r.elements.container=t(l.container,s),r.elements.seats=e(l.seats,s),r.elements.count=t(l.count,s),r.elements.total=t(l.total,s),r.elements.movieSelect=t(l.movieSelect,s),r.data.ticketPrice=+r.elements.movieSelect.value,m(),v(),f()}(i)}))})();